# PathCollab Environment Configuration
# Copy this file to .env and customize as needed

# =============================================================================
# Server Configuration
# =============================================================================

# Log level configuration (Rust tracing format)
# Options: trace, debug, info, warn, error
# Example: pathcollab=debug,tower_http=info
RUST_LOG=pathcollab=info,tower_http=info

# Server bind address
HOST=0.0.0.0

# Server port
PORT=8080

# Public base URL for link generation (optional)
# Used when generating shareable session links
# PUBLIC_BASE_URL=https://pathcollab.example.com

# Set to true when running behind a reverse proxy
# Enables trust of X-Forwarded-* headers
BEHIND_PROXY=false

# =============================================================================
# WSI Streamer Configuration
# =============================================================================

# URL of the WSI tile server
WSISTREAMER_URL=http://wsistreamer:3000

# Path to slides directory (for WSIStreamer)
SLIDES_PATH=/slides

# =============================================================================
# Session Configuration
# =============================================================================

# Maximum number of followers per session
MAX_FOLLOWERS=20

# Maximum number of concurrent sessions
MAX_CONCURRENT_SESSIONS=50

# Session maximum duration in hours
SESSION_MAX_DURATION_HOURS=4

# Grace period in seconds after presenter disconnects before ending session
PRESENTER_GRACE_PERIOD_SECS=30

# =============================================================================
# Overlay Configuration
# =============================================================================

# Maximum overlay file size in megabytes
OVERLAY_MAX_SIZE_MB=500

# Upload timeout in seconds
OVERLAY_UPLOAD_TIMEOUT_SECS=300

# Overlay cache directory
OVERLAY_CACHE_DIR=/var/lib/pathcollab/overlays

# Maximum cache size in gigabytes
OVERLAY_CACHE_MAX_GB=50

# Tile size for overlay rendering (256 or 512)
TILE_SIZE=256

# Maximum concurrent overlay processing jobs
OVERLAY_MAX_JOBS=2

# =============================================================================
# Presence Configuration
# =============================================================================

# Cursor broadcast frequency in Hz
CURSOR_BROADCAST_HZ=30

# Viewport broadcast frequency in Hz (presenter only)
VIEWPORT_BROADCAST_HZ=10

# =============================================================================
# Demo Configuration
# =============================================================================

# Enable demo mode with a pre-loaded slide
DEMO_ENABLED=false

# Slide ID for demo mode
DEMO_SLIDE_ID=

# Path to pre-generated overlay file for demo
DEMO_OVERLAY_PATH=

# =============================================================================
# Production Configuration (optional)
# =============================================================================

# Redis URL for session persistence in clustered mode
# Required for multi-instance deployments and session survival across restarts
# REDIS_URL=redis://redis:6379

# S3 configuration for shared overlay storage
# S3_ENDPOINT=
# S3_BUCKET=pathcollab-overlays
# S3_ACCESS_KEY=
# S3_SECRET_KEY=
