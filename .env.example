# PathCollab Environment Configuration
# =====================================
#
# Copy this file to .env and customize as needed.
# All variables have sensible defaults - no env vars are required for startup.
#
# CANONICAL PORTS (do not change without updating all config files):
#   - 3000: Frontend (Vite dev server / Nginx production)
#   - 8080: Backend (Rust Axum server)
#
# See also: docker-compose.yml, README.md, server/src/config.rs, web/vite.config.ts
#
# =============================================================================
# Server Configuration
# =============================================================================

# Log level (default: pathcollab=info,tower_http=info)
# Options: trace, debug, info, warn, error
# Example for verbose debugging: pathcollab=debug,tower_http=debug
# RUST_LOG=pathcollab=info,tower_http=info

# Server bind address (default: 0.0.0.0)
# Use 127.0.0.1 to only allow local connections
# HOST=0.0.0.0

# Server port (default: 8080)
# PORT=8080

# Public base URL for share links (optional)
# Set this in production to your public domain for correct share link generation
# In development, the frontend uses window.location.origin
# PUBLIC_BASE_URL=https://pathcollab.example.com

# Set to true when running behind a reverse proxy (default: false)
# Enables trust of X-Forwarded-* headers
# BEHIND_PROXY=false

# =============================================================================
# Slide Configuration
# =============================================================================

# Slide source mode (default: local)
# "local" uses OpenSlide to read WSI files directly (recommended)
# "wsistreamer" is deprecated and falls back to local
# SLIDE_SOURCE=local

# Path to slides directory (default: ./data/slides)
# Directory is auto-created on startup if it doesn't exist
# In Docker: mount your slides volume here
# SLIDES_DIR=./data/slides

# Tile size for rendering (default: 256)
# Standard values: 256 or 512
# SLIDE_TILE_SIZE=256

# JPEG quality for tile encoding (default: 85)
# Range: 1-100 (higher = better quality, larger files)
# SLIDE_JPEG_QUALITY=85

# Maximum cached slide handles (default: 10)
# Higher values use more memory but reduce disk I/O
# SLIDE_CACHE_SIZE=10

# =============================================================================
# Session Configuration
# =============================================================================

# Maximum followers per session (default: 20)
# MAX_FOLLOWERS=20

# Maximum concurrent sessions (default: 50)
# MAX_CONCURRENT_SESSIONS=50

# Session maximum duration in hours (default: 4)
# Sessions auto-expire after this time
# SESSION_MAX_DURATION_HOURS=4

# Grace period in seconds after presenter disconnects (default: 30)
# Session ends after this if presenter doesn't reconnect
# PRESENTER_GRACE_PERIOD_SECS=30

# =============================================================================
# Overlay Configuration
# =============================================================================

# Maximum overlay file size in MB (default: 500)
# OVERLAY_MAX_SIZE_MB=500

# Upload timeout in seconds (default: 300)
# OVERLAY_UPLOAD_TIMEOUT_SECS=300

# Overlay cache directory (default: ./data/overlays)
# Directory is auto-created on startup if it doesn't exist
# OVERLAY_CACHE_DIR=./data/overlays

# Maximum cache size in GB (default: 50)
# OVERLAY_CACHE_MAX_GB=50

# Tile size for overlay rendering (default: 256)
# TILE_SIZE=256

# Maximum concurrent overlay processing jobs (default: 2)
# OVERLAY_MAX_JOBS=2

# =============================================================================
# Presence Configuration
# =============================================================================

# Cursor broadcast frequency in Hz (default: 30)
# Higher values are smoother but use more bandwidth
# CURSOR_BROADCAST_HZ=30

# Viewport broadcast frequency in Hz (default: 10)
# VIEWPORT_BROADCAST_HZ=10

# =============================================================================
# Demo Configuration
# =============================================================================

# Enable demo mode with a pre-loaded slide (default: false)
# When enabled, demo slide is available at /s/demo
# DEMO_ENABLED=false

# Slide ID for demo mode (required if DEMO_ENABLED=true)
# DEMO_SLIDE_ID=

# Path to pre-generated overlay file for demo (optional)
# DEMO_OVERLAY_PATH=

# =============================================================================
# Production Configuration (optional, for advanced deployments)
# =============================================================================

# Redis URL for session persistence in clustered mode
# Required for multi-instance deployments and session survival across restarts
# REDIS_URL=redis://redis:6379

# S3 configuration for shared overlay storage (not yet implemented)
# S3_ENDPOINT=
# S3_BUCKET=pathcollab-overlays
# S3_ACCESS_KEY=
# S3_SECRET_KEY=
